/*----------------------------------------------------------------------* 
 * Copyright  (c) 2014 SAP SE. All rights reserved	
 * Author       : SAP Custom Development 
 *----------------------------------------------------------------------*/ 
	!function(){"use strict";jQuery.sap.require({modName:"com.zespri.awct.core.Controller",type:"controller"}),jQuery.sap.require("com.zespri.awct.util.CommonHelper"),jQuery.sap.require("com.zespri.awct.util.I18NHelper"),jQuery.sap.require("com.zespri.awct.util.LocaleFormatHelper"),jQuery.sap.require("com.zespri.awct.util.ModelHelper"),jQuery.sap.require("com.zespri.awct.util.NotificationHelper"),com.zespri.awct.core.Controller.extend("com.zespri.awct.admin.view.ScheduleRates",{_ScheduleType:{Delivery:"D",Pallet:"P",Swap:"S"},onInit:function(){this._oAddScheduleRatesDialog=null,this._bUserAuthorized=!1;var a=this,b=this.byId("scheduleRateTable");com.zespri.awct.util.CommonHelper.manageNoDataText(b),this.getRouter().attachRoutePatternMatched(function(b){if("Administration/ScheduleRates"===b.getParameter("name")){if(!a._bUserAuthorized)return void com.zespri.awct.util.NotificationHelper.showErrorToast(com.zespri.awct.util.I18NHelper.getText("TXT_USER_NOT_AUTHORIZED_MESSAGE_TEXT"));com.zespri.awct.util.CommonHelper.isUserAuthorized(com.zespri.awct.util.Enums.AuthorizationMode.Maintain,com.zespri.awct.util.Enums.AuthorizationObject.Administration,com.zespri.awct.util.Enums.AuthorizationFunctions.ZADM)||a.byId("scheduleRatesPage").getFooter()&&a.byId("scheduleRatesPage").getFooter().destroy()}})},onBeforeRendering:function(){com.zespri.awct.util.CommonHelper.isUserAuthorized(com.zespri.awct.util.Enums.AuthorizationMode.Display,com.zespri.awct.util.Enums.AuthorizationObject.Administration,com.zespri.awct.util.Enums.AuthorizationFunctions.ZADM)?this._bUserAuthorized=!0:(this.byId("scheduleRatesPage")&&this.byId("scheduleRatesPage").destroy(),this._bUserAuthorized=!1)},handleAddScheduleRatePress:function(){this._oAddScheduleRatesDialog||(this._oAddScheduleRatesDialog=sap.ui.xmlfragment("AddScheduleRatesFragement","com.zespri.awct.admin.fragment.AddScheduleRatesDialog",this),this.getView().addDependent(this._oAddScheduleRatesDialog));var a=sap.ui.core.Fragment.byId("AddScheduleRatesFragement","scheduleNameInput"),b=sap.ui.core.Fragment.byId("AddScheduleRatesFragement","deliveryPalleteInput");a.setValue(""),b.setSelectedKey(""),this._oAddScheduleRatesDialog.open()},handleScheduleRateTableSelect:function(a){var b=a.getSource().getSelectedItem(),c=b.getBindingContextPath();this.getRouter().navTo("Administration/ScheduleRatesDetail",{contextPath:c.substr(1)})},handleAddScheduleRatesClosePress:function(){this._oAddScheduleRatesDialog.close()},_getFormData:function(){var a=sap.ui.core.Fragment.byId("AddScheduleRatesFragement","scheduleNameInput"),b=sap.ui.core.Fragment.byId("AddScheduleRatesFragement","deliveryPalleteInput"),c=a.getValue(),d=b.getSelectedKey(),e=!1;if(c?a.setValueState(sap.ui.core.ValueState.None):(a.setValueState(sap.ui.core.ValueState.Error),a.setValueStateText(com.zespri.awct.util.I18NHelper.getText("TXT_ADMIN_SCHEDULE_RATE_DIALOG_SCHEDULE_NAME_ERROR_VALUE_STATE_TEXT")),e=!0),e)return null;var f={};return f.ScheduleName=c,f.ScheduleType=d,f},handleAddScheduleRatesSavePress:function(){var a=this,b=this.getView().getModel(),c=this._getFormData();if(c){var d=function(){var b=com.zespri.awct.util.I18NHelper.getText("TXT_ADMIN_ADD_SCHEDULE_RATES_DIALOG_SAVE_SUCCESS");com.zespri.awct.util.NotificationHelper.showSuccessToast(b),a._oAddScheduleRatesDialog.setBusy(!1),a._oAddScheduleRatesDialog.close()},e=function(b){com.zespri.awct.util.NotificationHelper.handleErrorMessage(b),a._oAddScheduleRatesDialog.setBusy(!1)};this._oAddScheduleRatesDialog.setBusy(!0),b.create("ScheduleSet",c,{success:d,error:e,async:!0})}},formatScheduleType:function(a){return a===this._ScheduleType.Delivery?com.zespri.awct.util.I18NHelper.getText("TXT_ADMIN_SCHEDULE_RATES_DETAIL_LABEL_SCHEDULE_TYPE_DELIVERY"):a===this._ScheduleType.Swap?com.zespri.awct.util.I18NHelper.getText("TXT_ADMIN_SCHEDULE_RATES_DETAIL_LABEL_SCHEDULE_TYPE_SWAP"):a===this._ScheduleType.Pallet?com.zespri.awct.util.I18NHelper.getText("TXT_GENERIC_PALLET"):""}})}();
/*----------------------------------------------------------------------* 
 * Copyright  (c) 2014 SAP SE. All rights reserved	
 * Author       : SAP Custom Development 
 *----------------------------------------------------------------------*/ 
	!function(){"use strict";jQuery.sap.require({modName:"com.zespri.awct.core.Controller",type:"controller"}),jQuery.sap.require("com.zespri.awct.util.Enums"),jQuery.sap.require("com.zespri.awct.util.I18NHelper"),jQuery.sap.require("com.zespri.awct.util.ModelHelper"),jQuery.sap.require("com.zespri.awct.util.NotificationHelper"),com.zespri.awct.core.Controller.extend("com.zespri.awct.admin.view.LibraryTextDetails",{onInit:function(){this._oMaintainLibraryTextContext=null,this._sViewStatus=null,this._bUserAuthorized=!1;var a=this;this.getRouter().attachOnBeforeNavigationWithUnsavedChanges(this.handleNavigationWithUnsavedChanges,this),this.getRouter().attachRoutePatternMatched(function(b){if("Administration/MaintainLibraryTextDetail"===b.getParameter("name")){if(!a._bUserAuthorized)return void com.zespri.awct.util.NotificationHelper.showErrorToast(com.zespri.awct.util.I18NHelper.getText("TXT_USER_NOT_AUTHORIZED_MESSAGE_TEXT"));if(this._sViewStatus=b.getParameter("arguments").viewMode,this._clearFormData(),com.zespri.awct.util.CommonHelper.isUserAuthorized(com.zespri.awct.util.Enums.AuthorizationMode.Maintain,com.zespri.awct.util.Enums.AuthorizationObject.Administration,com.zespri.awct.util.Enums.AuthorizationFunctions.ZADM)?(a.byId("addLibraryText").setEnabled(!0),a.byId("addLibraryActive").setEnabled(!0),a.byId("addLibrarySequence").setEnabled(!0)):a.byId("libraryTextDetailPage").getFooter()&&a.byId("libraryTextDetailPage").getFooter().destroy(),this._sViewStatus===com.zespri.awct.util.Enums.ViewMode.Add)return a.byId("addLibraryHeaderText").setEnabled(!0),a.byId("adminDeleteButton").setVisible(!1),void a.byId("libraryTextDetailPage").setTitle(com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTRATION_LIBRARY_TEXT_DETAILS_PAGE_TITLE_ADD"));a.byId("addLibraryHeaderText").setEnabled(!1),a.byId("libraryTextDetailPage").setTitle(com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTRATION_LIBRARY_TEXT_DETAILS_PAGE_TITLE_EDIT"));var c=b.getParameter("arguments").contextPath;this._oMaintainLibraryTextContext=new sap.ui.model.Context(this.getView().getModel(),"/"+c);var d=function(){var b=a.byId("addLibraryHeaderText"),c=a.byId("addLibraryText"),d=a.byId("addLibrarySequence"),e=a.byId("addLibraryActive"),f=a._oMaintainLibraryTextContext.getProperty("TextName"),g=a._oMaintainLibraryTextContext.getProperty("Text"),h=a._oMaintainLibraryTextContext.getProperty("Sequence"),i=a._oMaintainLibraryTextContext.getProperty("Active");b.setValue(f),c.setValue(g),d.setValue(h),e.setState(i),b.setValueState(sap.ui.core.ValueState.None),c.setValueState(sap.ui.core.ValueState.None),d.setValueState(sap.ui.core.ValueState.None),a.byId("libraryTextDetailPage").getFooter()&&(a.byId("adminDeleteButton").setVisible(!0),a.byId("adminSaveButton").setVisible(!0),a.byId("adminSaveButton").setEnabled(!1),a.byId("adminCancelButton").setVisible(!0)),a._setViewBusy(!1)},e=this._oMaintainLibraryTextContext.getProperty("addLibraryHeaderText");if(a._setViewBusy(!0),e)d();else{var f=function(b){a._oMaintainLibraryTextContext=new sap.ui.model.Context(b,"/result"),d()},g=function(a){com.zespri.awct.util.NotificationHelper.handleErrorMessage(a)};com.zespri.awct.util.ModelHelper.getJSONModelForRead(c,{},f,g)}}},this)},onBeforeRendering:function(){com.zespri.awct.util.CommonHelper.isUserAuthorized(com.zespri.awct.util.Enums.AuthorizationMode.Display,com.zespri.awct.util.Enums.AuthorizationObject.Administration,com.zespri.awct.util.Enums.AuthorizationFunctions.ZADM)?this._bUserAuthorized=!0:(this.byId("libraryTextDetailPage")&&this.byId("libraryTextDetailPage").destroy(),this._bUserAuthorized=!1)},_clearFormData:function(){var a=this.byId("addLibraryHeaderText"),b=this.byId("addLibraryText"),c=this.byId("addLibrarySequence"),d=this.byId("addLibraryActive");a.setValue(""),b.setValue(""),d.setState(),c.setValue(""),a.setValueState(sap.ui.core.ValueState.None),b.setValueState(sap.ui.core.ValueState.None),c.setValueState(sap.ui.core.ValueState.None),this.byId("libraryTextDetailPage").getFooter()&&(this.getView().byId("adminSaveButton").setVisible(!0),this.getView().byId("adminCancelButton").setVisible(!0))},handleTextInputChanges:function(){this.setHasUnsavedChanges(!0),this.getView().byId("adminSaveButton").setEnabled(!0)},handleSavePress:function(){var a=this,b=this.byId("addLibraryHeaderText"),c=this.byId("addLibraryText"),d=this.byId("addLibrarySequence"),e=this.byId("addLibraryActive"),f=b.getValue(),g=c.getValue(),h=d.getValue(),i=e.getState(),j=!1;if(f?b.setValueState(sap.ui.core.ValueState.None):(b.setValueState(sap.ui.core.ValueState.Error),b.setValueStateText(com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTARTION_HEADERTEXT_ERROR_STATE")),j=!0),g?c.setValueState(sap.ui.core.ValueState.None):(c.setValueState(sap.ui.core.ValueState.Error),j=!0),!h||isNaN(h)?(d.setValueState(sap.ui.core.ValueState.Error),d.setValueStateText(com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTARTION_SEQUENCE_ERROR_STATE")),j=!0):d.setValueState(sap.ui.core.ValueState.None),j){var k=com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTARTION_SEQUENCE_ERROR_VALUE_STATE_TEXT_BEFORE_SAVE_TOAST");return com.zespri.awct.util.NotificationHelper.showErrorToast(k),null}var l={TextName:f,Text:g,Active:i,Sequence:h},m=function(){var b=com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTARTION_SAVE_SCUSSESS_TOAST");com.zespri.awct.util.NotificationHelper.showSuccessToast(b),a._setViewBusy(!1),a.byId("adminSaveButton").setEnabled(!1),a.setHasUnsavedChanges(!1),a.getRouter().navBack()},n=function(b){com.zespri.awct.util.NotificationHelper.handleErrorMessage(b),a._setViewBusy(!1)};this._setViewBusy(!0);var o=this.getView().getModel();this._sViewStatus===com.zespri.awct.util.Enums.ViewMode.Add?o.create("/LibraryTextSet",l,{success:m,error:n}):this._sViewStatus===com.zespri.awct.util.Enums.ViewMode.Modify&&o.update("/LibraryTextSet('"+f+"')",l,{success:m,error:n,async:!0})},handleDeletePress:function(){var a=this,b={TextName:this._oMaintainLibraryTextContext.getProperty("TextName")},c=function(){var b=com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTARTION_DELETE_SCUSSESS_TOAST");com.zespri.awct.util.NotificationHelper.showSuccessToast(b),a.getView().setBusy(!1),a.getRouter().navBack()},d=function(b){com.zespri.awct.util.NotificationHelper.handleErrorMessage(b),a.getView().setBusy(!1)},e=function(){var b="/LibraryTextSet('"+a._oMaintainLibraryTextContext.getProperty("TextName")+"')";a.getView().setBusy(!0),a.getView().getModel().remove(b,{success:c,error:d})},f=function(){};if(b){var g=com.zespri.awct.util.I18NHelper.getText("TXT_ADMINISTRATION_LIBRARY_TEXT_DELETE_CONFIRMATION");com.zespri.awct.util.NotificationHelper.showConfirmDialog(g,e,f)}},handleCancelPress:function(){this.getRouter().navBack()},_setViewBusy:function(a){this.getView().setBusyIndicatorDelay(0),this.getView().setBusy(a),this.byId("libraryTextDetailPage").getFooter()&&this.byId("libraryTextDetailPage").getFooter().setBusy(a)},handleNavigationWithUnsavedChanges:function(a){var b=a.getParameter("fnAllowNavigation"),c=this,d=function(){c.setHasUnsavedChanges(!1),b()},e=com.zespri.awct.util.I18NHelper.getText("TXT_GENERIC_NAVIGATION_DATA_LOSS_MESSAGE");com.zespri.awct.util.NotificationHelper.showConfirmDialog(e,d)}})}();